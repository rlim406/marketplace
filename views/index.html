<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Marketplace</title>
  <link rel="stylesheet" href="../styles/reset.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../styles/style.css">
  <link href="https://fonts.googleapis.com/css?family=Charmonman:400,700" rel="stylesheet">

</head>


<body>
  <header>
    <a class="navbar-brand">Marketplace</a>
    <div class="insertNav" id="nav">
      <!-- Nav will get filled in here-->
    </div>
  </header>

  <div class="container">
    <!-- Ads will go in here -->

    <div class="row">
      <div class="col-lg-12">

        <!-- Database Tables in Use -->
        <div class="card">
          <div class="card-header">
            <h4>Database</h4>
          </div>
          <div class="card-body">
            <ul id="tableList" class="list-group"></ul>
          </div>
        </div>

      </div>
    </div>

    <!-- <div class="table-responsive">
      <h1>JSON DATA</h1>
      <br>
      <table class="table" id="data_table">
        <tr>
          <th>ID</th>
          <th>Image</th>
          <th>Title</th>
          <th>Description</th>
          <th>Category</th>
          <th>Price</th>
          <th>UserID</th>
          <th>Sold</th>
        </tr>
      </table>
    </div> -->



  </div>

  <script>
    // $(document).ready(function () {
    //   $.getJSON("data.json", function (data) {
    //     var product_data = "";
    //     $.each(data, function (key, value) {
    //       product_data += "<tr>";
    //       product_data += "<td>" + value.id + "</td>";
    //       product_data += "<td>" + value.image + "</td>";
    //       product_data += "<td>" + value.title + "</td>";
    //       product_data += "<td>" + value.description + "</td>";
    //       product_data += "<td>" + value.category + "</td>";
    //       product_data += "<td>" + value.price + "</td>";
    //       product_data += "<td>" + value.userID + "</td>";
    //       product_data += "<td>" + value.sold + "</td>";
    //       product_data += "</tr>";
    //     })
    //     $("#data_table").append(product_data);
    //   })
    // })

    function runTableQuery() {
      // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
      $.ajax({ url: "./routes/htmlRoutes.js", method: "GET" })
        .then(function (tableData) {

          // Here we then log the tableData to console, where it will show up as an object.
          // console.log(tableData);
          // console.log("------------------------------------");

          // Loop through and display each of the products
          for (var i = 0; i < tableData.length; i++) {

            // Get a reference to the tableList element and populate it with tables
            var tableList = $("#tableList").load("./routes/htmlRoutes.js");

            // Then display the fields in the HTML
            var listItem = $("<li class='list-group-item mt-4'>");
            console.log(tableData);
            listItem.append(
              $("<h2>").text("Item #" + (i + 1)),
              $("<hr>"),
              $("<h2>").text("ID: " + tableData[i].id),
              $("<h2>").text("Image: " + tableData[i].image),
              $("<h2>").text("Title: " + tableData[i].title),
              $("<h2>").text("Decription: " + tableData[i].description),
              $("<h2>").text("Category: " + tableData[i].category),
              $("<h2>").text("Price: " + tableData[i].price),
              $("<h2>").text("Sold: " + tableData[i].sold)
            );

            tableList.append(listItem);
          }
        });
    }



    // Run Queries!
    // ==========================================
    runTableQuery();

  </script>


  <footer class="footer">
    <div class="container">
      <span>Marketplace - Buy, Sell, Discover</span>
    </div>
  </footer>

</body>

</html>